---
import { formatDate } from '@/lib/utils';
import Tag from '@/components/common/Tag.astro';

interface Props {
  title: string;
  description: string;
  publishedAt: Date;
  category: string;
  tags?: string[];
  readingTime: number;
  href: string;
  featured?: boolean;
}

const { title, description, publishedAt, category, tags = [], readingTime, href, featured } = Astro.props;
---

<article class="group h-full">
  <a href={href} class="flex flex-col h-full card card-hover min-h-[400px]">
    {featured && (
      <div class="inline-block px-2 py-1 text-xs rounded bg-accent text-white mb-3 self-start font-medium">
        Featured
      </div>
    )}
    
    <div class="capitalize text-sm font-medium text-text-secondary mb-2">{category.replace(/-/g, ' ')}</div>
    <div class="text-xs text-text-tertiary mb-2">
      {formatDate(publishedAt, { month: 'short', day: 'numeric', year: 'numeric' })}
    </div>
    <div class="text-xs text-text-tertiary mb-3">{readingTime} min read</div>
    
    <h3 class="text-xl font-semibold text-text-primary mb-3 group-hover:text-accent transition-colors">
      {title}
    </h3>
    
    <p class="text-text-secondary line-clamp-3 mb-4 flex-grow">
      {description}
    </p>
    
    {tags.length > 0 && (
      <div class="flex flex-wrap gap-2 mt-auto">
        {tags.slice(0, 3).map((tag) => (
          <span class="text-xs text-text-tertiary">#{tag}</span>
        ))}
      </div>
    )}
  </a>
</article>
